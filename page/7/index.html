<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 308实验室</title><meta name="description" content="A Blog Powered By Hexo"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="308实验室"><meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="308实验室" type="application/atom+xml">
</head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/circle.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/Kiyamou" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/about" target="_self" class="nav-list-link">ABOUT</a></li></ul></header><main class="container"><ul class="home post-list"><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2019/06/15/av1-aom/" class="post-title-link">编译AV1编码器libaom的记录</a></h2><div class="post-info">Jun 15, 2019</div><div class="post-content"><h3 id="起始编译过程"><a href="#起始编译过程" class="headerlink" title="起始编译过程"></a>起始编译过程</h3><h4 id="pthread-h文件"><a href="#pthread-h文件" class="headerlink" title="pthread.h文件"></a><code>pthread.h</code>文件</h4><p>提示缺失<code>pthread.h</code>文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Looking for pthread.h - not found</span><br></pre></td></tr></table></figure>

<p>根据教程<a href="https://blog.csdn.net/qianchenglenger/article/details/16907821" target="_blank" rel="noopener">https://blog.csdn.net/qianchenglenger/article/details/16907821</a>，在windows下配置pthread。</p>
<p>下载<code>pthreads-w32-2-9-1-release.zip</code>，由于年久失修，需要在镜像站下载<br><a href="https://sourceware.org/mirrors.html" target="_blank" rel="noopener">https://sourceware.org/mirrors.html</a>-&gt;<a href="https://mirrors.kernel.org/sourceware/pthreads-win32/" target="_blank" rel="noopener">https://mirrors.kernel.org/sourceware/pthreads-win32/</a>。</p>
<p>具体操作只涉及<code>/Pre-built.2</code>中的文件。</p>
<p>1.将<code>/Pre-built.2/include</code>和<code>/Pre-built.2/lib</code>的文件分别放入VS 2019的对应文件夹下。</p>
<p>2.将<code>/Pre-built.2/dll</code>中<code>/x64</code>和<code>/x86</code>的文件分别放入<code>system32</code>和<code>SysWOW64</code>中。</p></div><a href="/2019/06/15/av1-aom/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2019/06/06/caffe-day12/" class="post-title-link">Day12 Caffe反向传播计算</a></h2><div class="post-info">Jun 6, 2019</div><div class="post-content"><p>《21天实战Caffe》学习笔记第12天</p>
<h3 id="代码阅读"><a href="#代码阅读" class="headerlink" title="代码阅读"></a>代码阅读</h3><p>本以为是继续阅读昨天<code>/src/caffe/net.cpp</code>代码中余下关于反向传播的部分，但先讲了关于损失层与损失函数的代码。</p>
<p>这也是符合直观想法的，因为反向传播的关键，就是反向传递误差（即损失）。                                                                                                                                                                                                                                                                                                                                                                                                                                                  </p>
<p>今天主要是讲了损失层、损失函数的实现，在买了《21天学通C++》后，代码也逐渐看得进去了。</p></div><a href="/2019/06/06/caffe-day12/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2019/06/06/git-use-0/" class="post-title-link">GPG密钥的配置与Git的使用</a></h2><div class="post-info">Jun 6, 2019</div><div class="post-content"><p>一些Git命令</p>
<h3 id="一、添加GPG密钥"><a href="#一、添加GPG密钥" class="headerlink" title="一、添加GPG密钥"></a>一、添加GPG密钥</h3><h4 id="准备工作：安装与配置GPG"><a href="#准备工作：安装与配置GPG" class="headerlink" title="准备工作：安装与配置GPG"></a>准备工作：安装与配置GPG</h4><p>（虽然Git自带GPG，但这里仍单独安装了GPG程序）</p>
<p>在Windows下，安装Gpg4win，下载地址：<a href="https://gpg4win.org/download.html" target="_blank" rel="noopener">https://gpg4win.org/download.html</a>。</p>
<p>Gpg4win中包含了GnuPG（GnuPG即GPG的全名）。</p>
<p>安装完成后，执行如下命令，指定使用我们刚安装的GnuPG。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global gpg.program &quot;C:\Program Files (x86)\GnuPG\bin\gpg.exe&quot;</span><br></pre></td></tr></table></figure>

<h4 id="创建与设置密钥"><a href="#创建与设置密钥" class="headerlink" title="创建与设置密钥"></a>创建与设置密钥</h4><p>使用<code>--full-generate-key</code>选项，即在创建密钥时进行完整的密钥选项设置。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --full-generate-key</span><br></pre></td></tr></table></figure></div><a href="/2019/06/06/git-use-0/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2019/06/05/caffe-day11/" class="post-title-link">Day11 Caffe前向传播计算</a></h2><div class="post-info">Jun 5, 2019</div><div class="post-content"><p>《21天实战Caffe》学习笔记第11天</p>
<h3 id="代码阅读"><a href="#代码阅读" class="headerlink" title="代码阅读"></a>代码阅读</h3><p>这一章是带领读者阅读<code>/src/caffe/net.cpp</code>，即描述网络（Net）的代码。</p>
<p>涉及了Net的构造函数，负责初始化的<code>Init()</code>函数，负责输出Blob、输入Blob、权值Blob的函数，以及关于Forward实现的函数。</p></div><a href="/2019/06/05/caffe-day11/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2019/06/05/caffe-day10/" class="post-title-link">Day10 Caffe模型</a></h2><div class="post-info">Jun 5, 2019</div><div class="post-content"><p>《21天实战Caffe》学习笔记第10天</p>
<p>在这一天重新看了训练日志，因为在Day6运行手写数字识别代码时，由于刚接触，很多log都没有来得及看。这一天结合相应源码看了看log。</p>
<h3 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h3><h4 id="逻辑回归分类器的训练"><a href="#逻辑回归分类器的训练" class="headerlink" title="逻辑回归分类器的训练"></a>逻辑回归分类器的训练</h4><p>在使用Caffe进行训练时，默认文件路径，自然是针对Caffe根目录的，要在Caffe根目录下执行以下命令。</p>
<p>这里的“默认文件路径”不仅指下面的命令，而且指参数文件中调用其他文件的路径。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ .&#x2F;build&#x2F;tools&#x2F;caffe train --solver&#x3D;examples&#x2F;mnist&#x2F;lenet_lr_solver.prototxt</span><br></pre></td></tr></table></figure></div><a href="/2019/06/05/caffe-day10/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2019/06/05/caffe-day9/" class="post-title-link">Day9 Caffe I/O模块</a></h2><div class="post-info">Jun 5, 2019</div><div class="post-content"><p>《21天实战Caffe》学习笔记第9天</p>
<h3 id="代码阅读：数据变换器的实现"><a href="#代码阅读：数据变换器的实现" class="headerlink" title="代码阅读：数据变换器的实现"></a>代码阅读：数据变换器的实现</h3><h4 id="实现文件-data-transformer-cpp"><a href="#实现文件-data-transformer-cpp" class="headerlink" title="实现文件 data_transformer.cpp"></a>实现文件 data_transformer.cpp</h4><p>针对Datum和Blob（Blobproto）两种方法，给出了不同输入、输出类型的变换函数，包括由Datum输入、由Blob输入、输入类型为cv::Mat对象，输出为指针、输出到Blob。</p></div><a href="/2019/06/05/caffe-day9/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2019/06/02/caffe-day8/" class="post-title-link">Day8 Caffe数据结构</a></h2><div class="post-info">Jun 2, 2019</div><div class="post-content"><p>《21天实战Caffe》学习笔记第8天</p>
<h3 id="代码测试"><a href="#代码测试" class="headerlink" title="代码测试"></a>代码测试</h3><p>运行书中的测试代码，按照书中介绍的执行流程进行，遇到一些问题，如下。</p>
<h4 id="报错1"><a href="#报错1" class="headerlink" title="报错1"></a>报错1</h4><p>执行如下编译语句时，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ g++ -o app blob_demo.cpp -I ~&#x2F;caffe&#x2F;include -D CPU_ONLY -I ~&#x2F;caffe&#x2F;.build_release&#x2F;src -L ~&#x2F;build&#x2F;lib -lcaffe</span><br></pre></td></tr></table></figure>

<p>报错。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cannot find -lcaffe</span><br></pre></td></tr></table></figure>

<p>解决方法是在编译前执行下列语句，将Caffe的<code>libcaffe.so</code>文件复制到系统的<code>/lib</code>文件下，否则g++编译命令中的<code>-lcaffe</code>无法执行。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cp ~&#x2F;caffe&#x2F;build&#x2F;lib&#x2F;libcaffe.so &#x2F;usr&#x2F;local&#x2F;lib</span><br></pre></td></tr></table></figure></div><a href="/2019/06/02/caffe-day8/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2019/06/01/caffe-day7/" class="post-title-link">Day7 Caffe代码梳理</a></h2><div class="post-info">Jun 1, 2019</div><div class="post-content"><script type="text/javascript"
   src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<p>《21天实战Caffe》学习笔记第7天</p>
<h3 id="练习题1：Caffe源码中一些宏的原始定义"><a href="#练习题1：Caffe源码中一些宏的原始定义" class="headerlink" title="练习题1：Caffe源码中一些宏的原始定义"></a>练习题1：Caffe源码中一些宏的原始定义</h3><h4 id="NOT-IMPLEMENTED"><a href="#NOT-IMPLEMENTED" class="headerlink" title="NOT_IMPLEMENTED"></a>NOT_IMPLEMENTED</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOT_IMPLEMENTED LOG(FATAL) &lt;&lt; <span class="meta-string">"Not Implemented Yet"</span></span></span><br></pre></td></tr></table></figure>

<h4 id="INSTANTIATE-CLASS"><a href="#INSTANTIATE-CLASS" class="headerlink" title="INSTANTIATE_CLASS"></a>INSTANTIATE_CLASS</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> INSTANTIATE_CLASS(classname) \</span></span><br><span class="line">  <span class="keyword">char</span> gInstantiationGuard#<span class="meta">#classname; \</span></span><br><span class="line">  <span class="keyword">template</span> <span class="class"><span class="keyword">class</span> <span class="title">classname</span>&lt;float&gt;;</span> \</span><br><span class="line">  <span class="keyword">template</span> <span class="class"><span class="keyword">class</span> <span class="title">classname</span>&lt;double&gt;</span></span><br></pre></td></tr></table></figure></div><a href="/2019/06/01/caffe-day7/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2019/06/01/caffe-day6/" class="post-title-link">Day6 手写数字识别</a></h2><div class="post-info">Jun 1, 2019</div><div class="post-content"><p>《21天实战Caffe》学习笔记第6天</p>
<h3 id="练习题3：完成Caffe-Cifar10示例"><a href="#练习题3：完成Caffe-Cifar10示例" class="headerlink" title="练习题3：完成Caffe Cifar10示例"></a>练习题3：完成Caffe Cifar10示例</h3><h4 id="下载数据集"><a href="#下载数据集" class="headerlink" title="下载数据集"></a>下载数据集</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cd ~&#x2F;caffe&#x2F;data&#x2F;cifar10</span><br><span class="line">$ .&#x2F;get_cifar10.sh</span><br></pre></td></tr></table></figure>

<h4 id="数据的格式转换"><a href="#数据的格式转换" class="headerlink" title="数据的格式转换"></a>数据的格式转换</h4><p>将下载的数据集转换为caffe支持的lmdb格式。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cd ~&#x2F;caffe&#x2F;examples&#x2F;cifar10</span><br><span class="line">$ .&#x2F;create_cifar10.sh</span><br></pre></td></tr></table></figure>

<h4 id="修改训练参数"><a href="#修改训练参数" class="headerlink" title="修改训练参数"></a>修改训练参数</h4><p>由于在虚拟机下运行，无法使用GPU进行训练，故需将训练参数中的训练模式设置为CPU模式。</p>
<p>在<code>~/caffe/examples/cifar10</code>文件件下，打开<code>cifar10_full_solver.prototxt</code>，将最后的<code>solve mode</code>改为CPU模式。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># solver mode: CPU or GPU</span></span><br><span class="line">solver_mode: CPU</span><br></pre></td></tr></table></figure></div><a href="/2019/06/01/caffe-day6/" class="read-more">...more</a></article></li></ul></main><footer><div class="paginator"><a href="/page/6/" class="prev">PREV</a></div><div class="copyright"><p>© 2019 - 2020 <a href="http://yoursite.com">Kiyamou</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>